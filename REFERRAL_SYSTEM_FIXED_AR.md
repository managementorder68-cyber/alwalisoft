# โ ุชู ุฅุตูุงุญ ูุธุงู ุงูุฅุญุงูุงุช ุจูุฌุงุญ

ุชุงุฑูุฎ: 7 ููููุจุฑ 2025

## ๐ ุงููุดููุฉ ุงูููุชุดูุฉ

ุนูุฏ ุชุฑุญูู ุงูุจูุงูุงุช ูู SQLite ุฅูู PostgreSQLุ ุชู ุชุฑุญูู ุงููุณุชุฎุฏููู ูุงูููุงู ููุทุ ูููู **ูู ูุชู ุชุฑุญูู ุจูุงูุงุช ุงูุฅุญุงูุงุช** ูู ุงูุฌุฏุงูู ุงูุชุงููุฉ:
- `referral_trees` โ
- `referrals` โ

ูุฐุง ุฃุฏู ุฅูู:
- โ `users.referralCount` ููุฌูุฏ ูุตุญูุญ
- โ `referralTree` ูุงุฑุบ ุชูุงูุงู
- โ `referrals` ูุงุฑุบ ุชูุงูุงู

## ๐ง ุงูุญู ุงููุทุจู

### 1. ุฅุนุงุฏุฉ ุจูุงุก ุจูุงูุงุช ุงูุฅุญุงูุงุช

ุชู ุฅูุดุงุก ุณูุฑูุจุช ูุฅุนุงุฏุฉ ุจูุงุก ุฌููุน ุจูุงูุงุช ุงูุฅุญุงูุงุช ุจูุงุกู ุนูู ุงูุนูุงูุงุช ุงูููุฌูุฏุฉ ูู ุฌุฏูู `users`:

```javascript
// ูุนุงูุฌุฉ ูู ูุณุชุฎุฏู ููุญุงู
for (const user of users) {
  if (user.referredById) {
    // Level 1: ุงูุฅุญุงูุฉ ุงููุจุงุดุฑุฉ (5000 ุนููุฉ)
    // Level 2: ุฅุญุงูุฉ ุงูุฅุญุงูุฉ (500 ุนููุฉ)
    // Level 3: ุฅุญุงูุฉ ุฅุญุงูุฉ ุงูุฅุญุงูุฉ (250 ุนููุฉ)
  }
}
```

### 2. ุงููุชุงุฆุฌ ุจุนุฏ ุงูุฅุตูุงุญ

**saddamalwlai:**
- referralCount: 3
- Level 1: 3 ุฅุญุงูุงุช - 15,000 ุนููุฉ
- Level 2: 1 ุฅุญุงูุฉ - 500 ุนููุฉ
- **ุงูุฅุฌูุงูู: 15,500 ุนููุฉ** โ

**Tt_2_A:**
- referralCount: 1
- Level 1: 1 ุฅุญุงูุฉ - 5,000 ุนููุฉ
- **ุงูุฅุฌูุงูู: 5,000 ุนููุฉ** โ

**ุฅุฌูุงูู ุณุฌูุงุช ุงูุฅุญุงูุงุช: 5** โ

## ๐งช ุงูุงุฎุชุจุงุฑ

ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุจูุฌุงุญ:

```
๐ค ุงูููุญูู: saddamalwlai
   ุงูุฑุตูุฏ ูุจู: 38,728
   ุนุฏุฏ ุงูุฅุญุงูุงุช ูุจู: 3

โ ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ ููุญุงู

๐ฐ ุชู ููุญ 5,000 ุนููุฉ ููููุญูู

๐ค ุงูููุญูู ุจุนุฏ ุงูุฅุญุงูุฉ:
   ุงูุฑุตูุฏ: 43,728 (ุฒูุงุฏุฉ: 5,000) โ
   ุนุฏุฏ ุงูุฅุญุงูุงุช: 4 โ

๐ ุดุฌุฑุฉ ุงูุฅุญุงูุงุช:
   Level 1: 4 ุฅุญุงูุงุช
   ุฅุฌูุงูู ุงูุฃุฑุจุงุญ: 20,500 ุนููุฉ โ
```

## ๐ ููู ูุนูู ูุธุงู ุงูุฅุญุงูุงุช

### ููุงูุขุช ุงูุฅุญุงูุฉ:

| ุงููุณุชูู | ุงูููุงูุฃุฉ | ุงููุณุจุฉ | ุงููุตู |
|---------|----------|--------|-------|
| Level 1 | 5,000 ุนููุฉ | 10% ุนูููุฉ | ุงูุฅุญุงูุฉ ุงููุจุงุดุฑุฉ |
| Level 2 | 500 ุนููุฉ | 5% ุนูููุฉ | ุฅุญุงูุฉ ุงูุฅุญุงูุฉ |
| Level 3 | 250 ุนููุฉ | 2% ุนูููุฉ | ุฅุญุงูุฉ ุฅุญุงูุฉ ุงูุฅุญุงูุฉ |

### ูุซุงู:

```
ุฃุญูุฏ (A) ููุญูู ูุญูุฏ (B)
  โ A ูุญุตู ุนูู 5,000 ุนููุฉ (Level 1)

ูุญูุฏ (B) ููุญูู ุนูู (C)
  โ B ูุญุตู ุนูู 5,000 ุนููุฉ (Level 1)
  โ A ูุญุตู ุนูู 500 ุนููุฉ (Level 2)

ุนูู (C) ููุญูู ุฎุงูุฏ (D)
  โ C ูุญุตู ุนูู 5,000 ุนููุฉ (Level 1)
  โ B ูุญุตู ุนูู 500 ุนููุฉ (Level 2)
  โ A ูุญุตู ุนูู 250 ุนููุฉ (Level 3)
```

## ๐ ุงูุชุญุฏูุซุงุช ุนูู ุงูููุฏ

### ุงูุจูุช (bot/handlers/start.ts)

โ ูุนูู ุจุดูู ุตุญูุญ
- ูููุดุฆ ุณุฌูุงุช ูู `referrals`
- ููุญุฏุซ `referralTree`
- ููุญุฏุซ `referralCount`
- ูููุญ ุงูููุงูุขุช ูููุณุชููุงุช ุงูุซูุงุซุฉ

### API (app/api/users/route.ts)

โ ูุนูู ุจุดูู ุตุญูุญ
- ูููุดุฆ ุณุฌูุงุช ูู `referrals`
- ููุญุฏุซ `referralTree`
- ููุญุฏุซ `referralCount`
- ูููุญ ููุงูุขุช Level 1 ููุท

## โ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

| ุงููููู | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|---------|---------|
| ุฌุฏูู users | โ ูุนูู | referralCount ูุญุฏุซ |
| ุฌุฏูู referralTree | โ ูุนูู | ุฌููุน ุงูุจูุงูุงุช ููุฌูุฏุฉ |
| ุฌุฏูู referrals | โ ูุนูู | 5 ุณุฌูุงุช |
| ุงูุจูุช | โ ูุนูู | Level 1, 2, 3 |
| API | โ ูุนูู | Level 1 ููุท |

## ๐ฏ ูุง ูุญุชุงุฌ ุงุฎุชุจุงุฑ ูู ุงููุณุชุฎุฏู

1. **ุงุฎุชุจุงุฑ ูู ุงูุจูุช:**
   ```
   /start ref_z4wxUj5GTs
   ```
   - ูุฌุจ ุฃู ูุญุตู saddamalwlai ุนูู 5,000 ุนููุฉ
   - ูุฌุจ ุฃู ูุฒุฏุงุฏ referralCount

2. **ุงุฎุชุจุงุฑ ูู ุงูุชุทุจูู:**
   - ูุชุญ Mini App ูู ุฑุงุจุท ุงูุฅุญุงูุฉ
   - ูุฌุจ ุฃู ูุญุตู ุงูููุญูู ุนูู 5,000 ุนููุฉ
   - ูุฌุจ ุฃู ูุธูุฑ ุงูุนุฏุฏ ุงูุฌุฏูุฏ ูู ุตูุญุฉ ุงูุฅุญุงูุงุช

3. **ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช:**
   - ูู ุงูุจูุช: ุงุถุบุท ุนูู "๐ฅ ุงูุฅุญุงูุงุช"
   - ูู ุงูุชุทุจูู: ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅุญุงูุงุช
   - ูุฌุจ ุฃู ุชุธูุฑ ุฌููุน ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

## ๐ ููุงุญุธุงุช ูููุฉ

- โ ุฌููุน ุจูุงูุงุช ุงูุฅุญุงูุงุช ุงููุฏููุฉ ุชู ุชุฑุญูููุง ุจูุฌุงุญ
- โ ุงููุธุงู ูุนูู ููุฅุญุงูุงุช ุงูุฌุฏูุฏุฉ
- โ ุงูููุงูุขุช ุชูููุญ ุชููุงุฆูุงู
- โ ุงูุชุญุฏูุซุงุช ุชุชู ูู ุงูููุช ุงููุนูู
- โ๏ธ API ูููุญ Level 1 ููุท (ุงูุจูุช ูููุญ Level 1, 2, 3)

---

**ูุธุงู ุงูุฅุญุงูุงุช ูุนูู ุจุดูู ูุงูู ุงูุขู! ๐**
