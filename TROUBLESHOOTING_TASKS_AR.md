# ๐ง ุฏููู ุญู ูุดุงูู ุงูููุงู - Troubleshooting

## ๐ ุงูุชุงุฑูุฎ: 8 ููููุจุฑ 2025

---

## โ **ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**

```
๐ ุงููุญุต ุงูุฃุฎูุฑ:
   โ ุฌููุน ุงูููุงู (11/11) ูุฏููุง verificationData
   โ ุฌููุน ุงูููุงู ูุฏููุง type ูู verificationData
   โ ุงูููุงู ุงูุชู ุชุญุชุงุฌ ุฑูุงุจุท ูุฏููุง postUrl
   โ ุงูููุงู ุงูุชู ุชุญุชุงุฌ channelUsername ูุฏููุง ุงููููุฉ
   โ ูุง ูุดุงูู ูู ุงูุจูุงูุงุช
```

---

## ๐ **ุฅุฐุง ุธูุฑ "ุญุฏุซ ุฎุทุฃ" - ุงุชุจุน ูุฐู ุงูุฎุทูุงุช:**

### **ุฎุทูุฉ 1: ุงูุชุญ Console ูู ุงููุชุตูุญ**

```
Chrome/Edge:
  F12 โ Console

Safari:
  Develop โ Show Web Inspector โ Console

Firefox:
  F12 โ Console

Telegram WebApp:
  ุตุนุจ ุงููุตูู - ุงุณุชุฎุฏู ูุชุตูุญ ุนุงุฏู ููุชุดุฎูุต
```

---

### **ุฎุทูุฉ 2: ุงูุญุต Console Logs**

ุนูุฏ ุงูุถุบุท ุนูู "ุงุจุฏุฃ ุงููููุฉ"ุ ูุฌุจ ุฃู ุชุฑู:

```javascript
โ Logs ุงููุชููุนุฉ:

๐ฏ completeTaskDirect called with taskId: task-1
๐ค Current user: { id: "...", telegramId: "..." }
๐ Initial userId: 3a423161-6f2e-4450-96a7-d20c4db96b91
๐ฑ Telegram ID: 6411364378
โ Final userId: 3a423161-6f2e-4450-96a7-d20c4db96b91
๐ Sending completion request...
๐ค Request body: { userId: "...", verified: false }
๐ Response status: 200
๐ Response ok: true
๐ฆ Response data: { success: true, data: { rewardAmount: 500, ... } }
โ Task completed successfully! Reward: 500
```

---

### **ุฎุทูุฉ 3: ุญุฏุฏ ููุน ุงูุฎุทุฃ**

#### **โ ุฎุทุฃ 1: "No userId"**

```javascript
Console:
โ No user found
ุฃู
โ Still no valid userId after all attempts

ุงูุญู:
1. ุงูุชุญ /mini-app/login
2. ุณุฌู ุฏุฎูู ูู ุฌุฏูุฏ
3. ุชุฃูุฏ ูู ุธููุฑ "โ User logged in" ูู Console
4. ุญุงูู ุงููููุฉ ูุฑุฉ ุฃุฎุฑู
```

#### **โ ุฎุทุฃ 2: "Task already completed"**

```javascript
Response data: {
  success: false,
  error: "Task already completed"
}

ุงูุญู:
โ ูุฐุง ููุณ ุฎุทุฃ!
ุงููููุฉ ููุชููุฉ ูุณุจูุงู.
ุงุฎุชุฑ ูููุฉ ุฃุฎุฑู.
```

#### **โ ุฎุทุฃ 3: "User not found"**

```javascript
Response data: {
  success: false,
  error: "User not found"
}

ุงูุณุจุจ ุงููุญุชูู:
userId ุฎุงุทุฆ ุฃู undefined

ุงูุญู:
1. ุงูุญุต Console:
   console.log('userId:', userId)
2. ูุฌุจ ุฃู ูููู UUID ูุซู:
   "3a423161-6f2e-4450-96a7-d20c4db96b91"
3. ุฅุฐุง ูุงู undefined:
   - ุฃุนุฏ ุชุณุฌูู ุงูุฏุฎูู
   - ุงูุณุญ localStorage
   - ุณุฌู ุฏุฎูู ูู ุฌุฏูุฏ
```

#### **โ ุฎุทุฃ 4: "ูู ุชุณุชูู ุดุฑูุท ุงููููุฉ"**

```javascript
Response data: {
  success: false,
  error: "ุชุญุชุงุฌ 2 ุฅุญุงูุฉ ุฅุถุงููุฉ (ุญุงููุงู: 1)",
  verified: false,
  data: { currentCount: 1, required: 3 }
}

ุงูุญู:
โ ูุฐุง ุฃูุถุงู ููุณ ุฎุทุฃ!
ูุธุงู ุงูุชุญูู ูุนูู ุจุดูู ุตุญูุญ.
ุงููุณุชุฎุฏู ูู ูุณุชูู ุงูุดุฑูุท ูุนูุงู.

ุฃูุซูุฉ:
- ูููุฉ ุฏุนูุฉ 3 ุฃุตุฏูุงุก โ ูุฏูู 1 ููุท
- ูููุฉ 50,000 ููุทุฉ โ ุฑุตูุฏู 35,000
- ูููุฉ ููุงุฉ Telegram โ ูู ุชุดุชุฑู ุจุนุฏ
```

---

### **ุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ูุฏูู ูููููุฉ**

#### **Test 1: ูููุฉ ุชุณุฌูู ุงูุฏุฎูู (ุชููุงุฆูุฉ)**

```
1. ุงุฐูุจ ููููุงู
2. ุงุฎุชุฑ "ุชุณุฌูู ุงูุฏุฎูู ุงููููู" ุฃู "Vvv"
3. ุงุถุบุท "ุงุจุฏุฃ ุงููููุฉ"
4. ูุฌุจ ุฃู ุชูุชูู ููุฑุงู โ

ุฅุฐุง ูุดูุช:
- ุงูุญุต Console
- ุงูุณุฎ ุฌููุน ุงูุฑุณุงุฆู
- ุฃุฑุณููุง ููุฏุนู
```

#### **Test 2: ูููุฉ ุฏุนูุฉ ุฃุตุฏูุงุก**

```
1. ุงุฎุชุฑ "ุฏุนูุฉ 3 ุฃุตุฏูุงุก"
2. ุงุถุบุท "ุงุจุฏุฃ ุงููููุฉ"

ุฅุฐุง ูุงู ูุฏูู < 3 ุฅุญุงูุงุช:
โ ูุฌุจ ุฃู ุชุธูุฑ:
   "โ ุชุญุชุงุฌ X ุฅุญุงูุฉ ุฅุถุงููุฉ (ุญุงููุงู: Y)"
   ูุฐุง ุตุญูุญ!

ุฅุฐุง ูุงู ูุฏูู >= 3 ุฅุญุงูุงุช:
โ ูุฌุจ ุฃู ุชูุชูู ุงููููุฉ
```

---

## ๐ **ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุญููููุง:**

### **1. ุงููุณุชุฎุฏู ูุง ูุฑู ุงูููุงู ุฃุตูุงู**

```
ุงูุณุจุจ ุงููุญุชูู:
- API ูุง ูุณุชุฌูุจ
- ูุดููุฉ ูู Network

ุงูุญู:
1. ุงูุชุญ Network tab ูู DevTools
2. ุงุจุญุซ ุนู: GET /api/tasks
3. ุงูุญุต Response
4. ูุฌุจ ุฃู ูููู:
   { success: true, data: { tasks: [...] } }
```

### **2. ุฌููุน ุงูููุงู ุชูุดู**

```
ุงูุณุจุจ ุงููุญุชูู:
- user.id ุบูุฑ ููุฌูุฏ ูู localStorage

ุงูุญู:
1. ุงูุชุญ Application โ localStorage ูู DevTools
2. ุงุจุญุซ ุนู "user"
3. ูุฌุจ ุฃู ูุญุชูู ุนูู:
   {
     "id": "uuid-here",
     "telegramId": "123456",
     ...
   }
4. ุฅุฐุง ูู ููู ููุฌูุฏุงู:
   - ุฃุนุฏ ุชุณุฌูู ุงูุฏุฎูู ูู /mini-app/login
```

### **3. ูููุฉ ูุงุญุฏุฉ ุชูุดูุ ูุงูุจุงูู ุชุนูู**

```
ุงูุณุจุจ ุงููุญุชูู:
- ุงููููุฉ ุงููุญุฏุฏุฉ ุชุญุชุงุฌ ุดุฑูุท ุบูุฑ ูุณุชููุงุฉ

ุงูุญู:
1. ุงูุญุต ููุน ุงููููุฉ
2. ุฅุฐุง ูุงูุช "ุฏุนูุฉ ุฃุตุฏูุงุก":
   - ูู ูุฏูู ุงูุนุฏุฏ ุงููุทููุจ ูู ุงูุฅุญุงูุงุชุ
3. ุฅุฐุง ูุงูุช "ููุงุฉ Telegram":
   - ูู ุงุดุชุฑูุช ูู ุงูููุงุฉ ูุนูุงูุ
4. ุฅุฐุง ูุงูุช "ุฑุตูุฏ":
   - ูู ุฑุตูุฏู ููููุ
```

---

## ๐ **ูุงุฆูุฉ ุงูุชุญูู ุงูุดุงููุฉ:**

```
โ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   โก ุฌููุน ุงูููุงู ูุฏููุง verificationData
   โก ุฌููุน ุงูููุงู ูุฏููุง type
   โก ุงูููุงู ุงูุชู ุชุญุชุงุฌ ุฑูุงุจุท ูุฏููุง postUrl
   
โ Frontend:
   โก user.id ููุฌูุฏ ูู localStorage
   โก user.telegramId ููุฌูุฏ
   โก Console ูุง ูุนุฑุถ ุฃุฎุทุงุก ุญูุฑุงุก
   
โ API:
   โก GET /api/tasks ูุนูู
   โก POST /api/tasks/[id]/complete ูุนูู
   โก Build ูุงุฌุญ
   
โ ุงููุณุชุฎุฏู:
   โก ูุณุฌู ุฏุฎูู
   โก ูุฏูู UUID ุตุญูุญ
   โก ูุณุชููู ุดุฑูุท ุงููููุฉ (ุฅู ูุฌุฏุช)
```

---

## ๐งช **ุณูุฑุจุช ุชุดุฎูุต ุณุฑูุน:**

```bash
cd /workspace

# 1. ูุญุต ุงูููุงู
node -e "
const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();
prisma.task.findMany({ where: { isActive: true } })
  .then(tasks => {
    console.log('โ ุนุฏุฏ ุงูููุงู:', tasks.length);
    const withVerification = tasks.filter(t => t.verificationData).length;
    console.log('โ ูุฏููุง verificationData:', withVerification + '/' + tasks.length);
    return prisma.\$disconnect();
  });
"

# 2. ูุญุต ุงููุณุชุฎุฏููู
node -e "
const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();
Promise.all([
  prisma.user.count(),
  prisma.wallet.count(),
  prisma.userStatistics.count()
]).then(([users, wallets, stats]) => {
  console.log('โ Users:', users);
  console.log('โ Wallets:', wallets, users === wallets ? '(ูุงูู)' : '(ูุงูุต)');
  console.log('โ Statistics:', stats, users === stats ? '(ูุงูู)' : '(ูุงูุต)');
  return prisma.\$disconnect();
});
"

# 3. ุงุฎุชุจุงุฑ Build
pnpm build

# ุฅุฐุง ูุดู Build โ ุงููุดููุฉ ูู ุงูููุฏ
# ุฅุฐุง ูุฌุญ Build โ ุงููุดููุฉ ูู Runtime
```

---

## ๐ **ุทูุจ ุงููุณุงุนุฏุฉ:**

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุฃุฑุณู ูุฐู ุงููุนูููุงุช:

```
1. Console Logs (ูุงููุฉ):
   - ูู ูุญุธุฉ ูุชุญ ุงูุตูุญุฉ
   - ุญุชู ุงูุถุบุท ุนูู ุงููููุฉ
   
2. Network tab:
   - Request URL
   - Request Body
   - Response Status
   - Response Body
   
3. ุงููููุฉ ุงููุญุฏุฏุฉ:
   - ID
   - Name
   - Category
   
4. ูุนูููุงุช ุงููุณุชุฎุฏู:
   - ูู ูุณุฌู ุฏุฎููุ
   - ูู ูุฏูู UUIDุ
   - ูู ูุธูุฑ ูู localStorageุ
```

---

## ๐ฏ **ุงูุฎูุงุตุฉ:**

```
โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณูููุฉ 100%
โ ุงูููุฏ ุณููู 100%
โ Build ูุงุฌุญ 100%

ุฅุฐุง ุธูุฑ ุฎุทุฃ:
1. ุงูุญุต Console
2. ุงุชุจุน ุงูุฎุทูุงุช ุฃุนูุงู
3. ูุนุธู "ุงูุฃุฎุทุงุก" ูู ูู ุงููุงูุน ุชุญูู ูุงุฌุญ!
   ูุซู: "ุชุญุชุงุฌ 2 ุฅุญุงูุฉ ุฅุถุงููุฉ"
```

---

**๐ ุงูุชุงุฑูุฎ:** 8 ููููุจุฑ 2025  
**โ ุงูุญุงูุฉ:** **ุฏููู troubleshooting ุดุงูู**
